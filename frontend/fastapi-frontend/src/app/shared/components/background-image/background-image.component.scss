.background-container {
  position: relative;
  width: 100%;
  height: 100%;
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
  background-attachment: fixed;
  transition: all 0.5s ease-in-out;

  &.blur {
    filter: blur(3px);
  }
}

.background-overlay {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.3);
  z-index: 1;
  transition: opacity 0.3s ease;
}

// Variações de opacidade do overlay
.background-container.overlay {
  .background-overlay {
    opacity: 1;
  }

  &[data-opacity="0.1"] .background-overlay {
    background: rgba(0, 0, 0, 0.1);
  }

  &[data-opacity="0.2"] .background-overlay {
    background: rgba(0, 0, 0, 0.2);
  }

  &[data-opacity="0.3"] .background-overlay {
    background: rgba(0, 0, 0, 0.3);
  }

  &[data-opacity="0.4"] .background-overlay {
    background: rgba(0, 0, 0, 0.4);
  }

  &[data-opacity="0.5"] .background-overlay {
    background: rgba(0, 0, 0, 0.5);
  }

  &[data-opacity="0.6"] .background-overlay {
    background: rgba(0, 0, 0, 0.6);
  }

  &[data-opacity="0.7"] .background-overlay {
    background: rgba(0, 0, 0, 0.7);
  }
}

// Conteúdo dentro do container
::ng-deep .background-container > *:not(.background-overlay) {
  position: relative;
  z-index: 2;
}

// Responsividade
@media (max-width: 768px) {
  .background-container {
    background-attachment: scroll; // Melhor performance em dispositivos móveis
  }
}

// Animação de fade-in para mudança de imagem
@keyframes backgroundFadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

.background-container {
  animation: backgroundFadeIn 0.5s ease-in-out;
}

// Tema escuro - overlay mais escuro
@media (prefers-color-scheme: dark) {
  .background-overlay {
    background: rgba(0, 0, 0, 0.5);
  }

  .background-container.overlay {
    &[data-opacity="0.1"] .background-overlay {
      background: rgba(0, 0, 0, 0.2);
    }

    &[data-opacity="0.2"] .background-overlay {
      background: rgba(0, 0, 0, 0.3);
    }

    &[data-opacity="0.3"] .background-overlay {
      background: rgba(0, 0, 0, 0.4);
    }

    &[data-opacity="0.4"] .background-overlay {
      background: rgba(0, 0, 0, 0.5);
    }

    &[data-opacity="0.5"] .background-overlay {
      background: rgba(0, 0, 0, 0.6);
    }

    &[data-opacity="0.6"] .background-overlay {
      background: rgba(0, 0, 0, 0.7);
    }

    &[data-opacity="0.7"] .background-overlay {
      background: rgba(0, 0, 0, 0.8);
    }
  }
}

// Efeitos especiais
.background-container.gradient-overlay {
  &::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(
      135deg,
      rgba(0, 0, 0, 0.4) 0%,
      rgba(0, 0, 0, 0.1) 50%,
      rgba(0, 0, 0, 0.4) 100%
    );
    z-index: 1;
  }
}

// Efeito de parallax suave
.background-container.parallax {
  transform: translateZ(0);
  will-change: transform;
}

// Prevenção de problemas de performance
.background-container {
  backface-visibility: hidden;
  perspective: 1000px;
}